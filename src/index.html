<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lapis</title>
  <link rel="stylesheet" href="./assets/style.css">
</head>
<body>

<!-- WELCOME SCREEN -->
<div id="welcome">
  <div class="logo"><span class="logo-icon">⬡</span> Lapis</div>
  <div class="tagline">a lightweight markdown editor</div>
  <div class="welcome-cards">
    <div class="welcome-card" id="btn-open">
      <div class="card-title">Open Vault</div>
      <div class="card-desc">Open an existing folder as your workspace</div>
    </div>
    <div class="welcome-card" id="btn-create">
      <div class="card-title">Create Vault</div>
      <div class="card-desc">Start fresh with a new vault</div>
    </div>
  </div>
  <div class="recent-section" id="recent-vaults"></div>
  <div class="footer">Version 0.10.0</div>
</div>

<!-- EDITOR APP -->
<div id="app">
  <div id="sidebar">
    <div id="vault-header">
      <span id="vault-name">Vault</span>
      <button id="btn-new-file" title="New file">+</button>
    </div>
    <input id="search-box" placeholder="Search files..." />
    <div id="file-tree"></div>
    <div id="sidebar-footer">
      <button id="btn-settings">Settings</button>
      <div id="vault-switcher">
        <span>Switch Vault</span>
        <span>^</span>
      </div>
    </div>
  </div>
  <div id="resize-handle"></div>
  <div id="editor-wrap">
    <div id="tab-bar"></div>
    <div id="no-file">Open a file from the sidebar</div>
    <div id="editor-root" style="display:none;"></div>
    <div id="status-bar">
      <span id="status-left"></span>
      <span id="status-right"></span>
    </div>
  </div>
</div>

<!-- MODAL -->
<div id="modal-overlay">
  <div id="modal-box">
    <h2 id="modal-title"></h2>
    <p id="modal-desc" style="display:none"></p>
    <input id="modal-input" style="display:none" />
    <div id="modal-actions">
      <button id="modal-cancel">Cancel</button>
      <button id="modal-confirm">Confirm</button>
    </div>
  </div>
</div>

<!-- CONTEXT MENU -->
<div id="context-menu">
  <div class="ctx-item" id="ctx-new-file">New File</div>
  <div class="ctx-item" id="ctx-new-folder">New Folder</div>
  <div class="ctx-divider"></div>
  <div class="ctx-item" id="ctx-rename">Rename</div>
  <div class="ctx-item" id="ctx-copy-path">Copy Path</div>
  <div class="ctx-divider"></div>
  <div class="ctx-item danger" id="ctx-delete">Delete</div>
</div>


<!-- SETTINGS -->
<div id="settings-overlay"></div>
<!-- OLD SETTINGS RM soon-->
 <!-- SETTINGS -->
<div id="settings-overlay">
  <div id="settings-panel">
    <div id="settings-header">
      <h1>Settings</h1>
      <button id="settings-close">✕</button>
    </div>
    <div id="settings-nav">
      <div class="settings-nav-item active" data-tab="themes">Themes</div>
    </div>
    <div id="settings-content">
      <div id="settings-themes"></div>
    </div>
  </div>
</div>

<!-- Global Search -->
<div id="search-overlay" style="display:none;">
  <div id="search-window">
    <input 
      id="global-search-input"
      placeholder="Search in vault..."
      spellcheck="false"
    />
    <div id="search-result"></div>
  </div>
</div>

<!-- COMMAND PALETTE -->
<div id="palette-overlay">
  <div id="palette-box">
    <input id="palette-input" placeholder="Search files..." autocomplete="off" spellcheck="false" />
    <div id="palette-results"></div>
    <div id="palette-hint">
      <span><kbd>↑↓</kbd> navigate</span>
      <span><kbd>Enter</kbd> open</span>
      <span><kbd>&gt;</kbd> commands</span>
      <span><kbd>Esc</kbd> close</span>

    </div>
  </div>
</div>

<script type="module" src="./main.js"></script>

<style>
  .cm-editor {
    flex: 1 !important;
    min-height: 0 !important;
    background: var(--bg-editor) !important;
    font-size: var(--editor-font-size, 16px) !important;
  }
  .cm-editor.cm-focused {
    outline: none !important;
    box-shadow: none !important;
    border: none !important;
  }
  .cm-scroller {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    padding: 40px 60px !important;
    font-family: inherit !important;
    height: 100% !important;
  }
  .cm-content {
    max-width: 720px !important;
    margin: 0 auto !important;
    caret-color: var(--accent) !important;
    padding-bottom: 200px !important;
  }
  .cm-gutters          { display: none !important; }
  .cm-activeLine       { background: transparent !important; }
  .cm-activeLineGutter { background: transparent !important; }
  .cm-line             { color: var(--text-primary) !important; }
  .cm-cursor           { border-left-color: var(--accent) !important; }
  .cm-selectionBackground { background: rgba(167,139,250,0.2) !important; }
  .cm-focused .cm-selectionBackground { background: rgba(167,139,250,0.2) !important; }

  .cm-editor * { outline: none !important; box-shadow: none !important; }
  .cm-editor, .cm-editor * { border-color: transparent !important; }
  .cm-editor.cm-focused { outline: none !important; box-shadow: none !important; border: none !important; }

  .cm-scroller::-webkit-scrollbar { width: 6px; }
  .cm-scroller::-webkit-scrollbar-track { background: transparent; }
  .cm-scroller::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  .cm-scroller::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
</style>

</body>
</html>